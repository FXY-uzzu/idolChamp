(function(){var t={4589:function(t,e,a){"use strict";var i=a(2856),n=a(4927),s=a.n(n),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},l=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",[e("el-form",{attrs:{inline:!0,model:t.searchForm,size:"mini"}},[e("el-form-item",{attrs:{label:"日期"}},[e("el-date-picker",{attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchForm.daterange,callback:function(e){t.$set(t.searchForm,"daterange",e)},expression:"searchForm.daterange"}})],1),e("el-form-item",{attrs:{label:"时间间隔"}},[e("el-select",{model:{value:t.searchForm.interval,callback:function(e){t.$set(t.searchForm,"interval",e)},expression:"searchForm.interval"}},[e("el-option",{attrs:{label:"1分钟",value:1}}),e("el-option",{attrs:{label:"5分钟",value:5}}),e("el-option",{attrs:{label:"10分钟",value:10}}),e("el-option",{attrs:{label:"30分钟",value:30}}),e("el-option",{attrs:{label:"1小时",value:60}})],1)],1),e("el-form-item",[e("el-button",{staticClass:"btn-warning",on:{click:t.exportExcel}},[t._v("导出")])],1)],1)],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"data-layout"},[t.searchForm.date?e("span",[t._v(" 当日涨幅： namtan: "+t._s(t.filterListDats.length>1?t.filterListDats[t.filterListDats.length-1].namtan-t.filterListDats[0].namtan:"-")+" film: "+t._s(t.filterListDats.length>1?t.filterListDats[t.filterListDats.length-1].film-t.filterListDats[0].film:"-")+" ")]):t._e(),e("span",[t._v(" 涨幅： namtan: "+t._s(t.filterListDats.length>1?t.filterListDats[t.filterListDats.length-1].namtan-t.filterListDats[0].namtan:"-")+" film: "+t._s(t.filterListDats.length>1?t.filterListDats[t.filterListDats.length-1].film-t.filterListDats[0].film:"-")+" ")]),e("div",{attrs:{id:"chart"}}),e("div",{attrs:{id:"chart2"}})])])},h=[],m=(a(8111),a(2489),a(1701),a(417)),f=a(3944),c=(a(4114),a(7588),a(9577),a(2116)),d=a(8222),u=a.n(d);function p(t,e=[],a="未命名",i="xls",{cols:n,headerStyle:s,merges:r}){const l=[...t,e],o=c.Wp.aoa_to_sheet(l);if(o["!cols"]=n?n.map(t=>({wpx:t})):t[0].map(()=>({wpx:100})),o["!merges"]=r||[],s){let t=s.headerLength??1;for(const a in o)if("!ref"!==a){const i=Number(a.slice(1));console.log(i,s.background.split("#").join("")),o[a].s={fill:{fgColor:{rgb:i<=t?s.background.split("#").join(""):e.length>0&&i==l.length?"FFFFDB":i%2>0?"ffffff":"fafafa"}},font:{sz:1===i?14:12,name:"微软雅黑",bold:1===i||e.length>0&&i==l.length,color:{rgb:1===i?s.color.split("#").join(""):"666666"}},alignment:{horizontal:"center",wrapText:!0,vertical:"center"},border:{top:{style:1===i?"":"thin"},bottom:{style:1===i?"":"thin"},left:{style:1===i?"":"thin"},right:{style:1===i?"":"thin"}}}}}const h=c.Wp.book_new();c.Wp.book_append_sheet(h,o,"Sheet1");const m=u().write(h,{bookType:"xlsx",bookSST:!1,type:"binary",cellStyles:!0});let f=null;if("undefined"!==typeof ArrayBuffer){for(var d=new ArrayBuffer(m.length),p=new Uint8Array(d),g=0;g!=m.length;++g)p[g]=255&m.charCodeAt(g);f=d}const y=new Blob([f]);var v=document.createElement("a");v.href=URL.createObjectURL(y),v.download=`${a}.${i}`,v.style.display="none",document.body.appendChild(v),v.click(),v.remove()}var g={data(){return{searchForm:{daterange:[new Date(`${this.parseTime(Date.now(),"{y}-{m}-{d}")} 00:00`).getTime(),new Date(`${this.parseTime(Date.now(),"{y}-{m}-{d}")} 23:59`).getTime()],interval:1},listData:[],pickerOptions:{disabledDate(t){return t.getTime()<new Date("2025-06-24").getTime()||t.getTime()>Date.now()}},timerId:null,loading:!1,firstIn:!0}},created(){},mounted(){console.log("production"),this.getList1(),setInterval(this.getList1,6e4),this.initChart(),this.initChart2()},computed:{filterListDats(){let t=[];return t=this.searchForm.date?this.listData.filter(t=>this.parseTime(parseInt(t.ts),"{y}-{m}-{d}")==this.searchForm.date):this.searchForm.daterange&&2==this.searchForm.daterange.length?this.listData.filter(t=>{let e=this.searchForm.daterange[0]/1e3,a=this.searchForm.daterange[1]/1e3;return console.log(e,a),t.ts>=e&&t.ts<=a}):this.listData,this.searchForm.interval&&(t=t.filter((t,e)=>e%this.searchForm.interval==0)),t}},watch:{"searchForm.date"(){this.initChart(),this.initChart2()},"searchForm.daterange"(){this.initChart(),this.initChart2()},"searchForm.interval"(){this.initChart(),this.initChart2()}},methods:{getList1(t){this.firstIn&&(this.loading=!0);let e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),s=e.getHours(),r=e.getMinutes(),l=this,o=t||new Date(`${a}-${i}-${n} ${s}:${r}`).getTime()/1e3-60+"",h="https://uzzu.vip.cpolar.top";m.A.get(`${h}/getData`,{timeout:2e4,headers:{"ngrok-skip-browser-warning":"69420"}}).then(t=>{console.log(t),t.data.data?(this.setData(t.data),this.loading=!1,this.firstIn=!1):(console.log(this.timerId),this.timerId||(l.timerId=setTimeout(function(){l.getList1(o),clearTimeout(l.timerId),l.timerId=null},5e3)))}).catch(t=>{if(console.log(t),!this.timerId){let t=this;t.timerId=setTimeout(function(){t.getList1(o),t.timerId=null},5e3)}})},getList(t){let e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),s=e.getHours(),r=e.getMinutes(),l=t||new Date(`${a}-${i}-${n} ${s}:${r}`).getTime()/1e3-60+"";m.A.get(`https://icpolls.com/stats?uid=01JXWFG20RKH9Q92VPQZ4KCZP0&ts=${l}`,{timeout:1e4}).then(t=>{t.data?this.setData(t):this.getList(l)}).catch(t=>{console.log(t),this.getList()})},setData(t){this.listData=t.data,this.initChart(),this.initChart2()},parseTime(t,e){if(0===arguments.length||!t)return null;const a=e||"{y}-{m}-{d} {h}:{i}:{s}";let i;"object"===typeof t?i=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),i=new Date(t));const n={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},s=a.replace(/{([ymdhisa])+}/g,(t,e)=>{const a=n[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")});return s},initChart(){let t=this.filterListDats.map(t=>this.parseTime(parseInt(t.ts),"{y}-{m}-{d} {h}:{i}")),e=this.filterListDats.map(t=>t.namtan),a=this.filterListDats.map(t=>t.film),i=f.Ts(document.getElementById("chart"));i.setOption({title:{text:"冠军秀趋势图"},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"}],tooltip:{trigger:"axis",formatter:t=>`\n            <span>日期: ${t[0].name}</span><br>\n            <span>namtan: ${t[0].value}</span><br>\n            <span>namtan涨幅: ${t[0].dataIndex>0?t[0].value-e[t[0].dataIndex-1]:"-"}</span><br>\n            <span>film: ${t[1].value}</span><br>\n            <span>film涨幅: ${t[1].dataIndex>0?t[1].value-a[t[1].dataIndex-1]:"-"}</span><br>\n            <span>差值: ${t[0].value-t[1].value}</span><br>\n            `},legend:{show:!0},xAxis:{type:"category",data:t},yAxis:{type:"value",min:2e4},series:[{name:"namtan",data:e,type:"line",showSymbol:!1,smooth:!0},{name:"film",data:a,type:"line",showSymbol:!1,smooth:!0}],dataset:{}})},initChart2(){let t=this.filterListDats.map(t=>this.parseTime(parseInt(t.ts),"{y}-{m}-{d} {h}:{i}")),e=this.filterListDats.map((t,e)=>0==e?0:t.namtan-this.filterListDats[e-1].namtan);console.log(e);let a=this.filterListDats.map((t,e)=>0==e?0:t.film-this.filterListDats[e-1].film),i=f.Ts(document.getElementById("chart2"));i.setOption({title:{text:"涨幅趋势图"},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"}],tooltip:{trigger:"axis"},legend:{show:!0},xAxis:{type:"category",data:t},yAxis:{type:"value"},series:[{name:"namtan",data:e,type:"line",showSymbol:!1,smooth:!0},{name:"film",data:a,type:"line",showSymbol:!1,smooth:!0}],dataset:{}})},async exportExcel(){var t=[],e=[],a=[],i=[];console.log(this.filterListDats),t=this.filterListDats.map((t,e)=>0==e?[this.parseTime(parseInt(t.ts),"{y}-{m}-{d} {h}:{i}"),t.namtan,"-",t.film,"-"]:[this.parseTime(parseInt(t.ts),"{y}-{m}-{d} {h}:{i}"),t.namtan,t.namtan-this.filterListDats[e-1].namtan,t.film,t.film-this.filterListDats[e-1].film]),e=[["时间","namtan","涨幅","film","涨幅"],...t],i=[200,200,200,200,200];const n=this.filterListDats[this.filterListDats.length-1].namtan-this.filterListDats[0].namtan,s=this.filterListDats[this.filterListDats.length-1].film-this.filterListDats[0].film;a=["当日总涨幅","",n,"",s];const r={background:"#f0f1f6",color:"#33333"};let l=this.parseTime(this.filterListDats[this.filterListDats.length-1].ts,"{y}-{m}-{d}");p(e,a,`趋势图-${l}`,"xlsx",{cols:i,headerStyle:r})}}},y=g,v=a(1656),D=(0,v.A)(y,o,h,!1,null,"1abc8f12",null),b=D.exports,L={name:"App",components:{HelloWorld:b}},x=L,w=(0,v.A)(x,r,l,!1,null,null,null),F=w.exports;i["default"].use(s()),i["default"].config.productionTip=!1,new i["default"]({render:t=>t(F)}).$mount("#app")},6793:function(){},7955:function(){},9468:function(t){"use strict";t.exports=cptable}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,i,n,s){if(!i){var r=1/0;for(m=0;m<t.length;m++){i=t[m][0],n=t[m][1],s=t[m][2];for(var l=!0,o=0;o<i.length;o++)(!1&s||r>=s)&&Object.keys(a.O).every(function(t){return a.O[t](i[o])})?i.splice(o--,1):(l=!1,s<r&&(r=s));if(l){t.splice(m--,1);var h=n();void 0!==h&&(e=h)}}return e}s=s||0;for(var m=t.length;m>0&&t[m-1][2]>s;m--)t[m]=t[m-1];t[m]=[i,n,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,s,r=i[0],l=i[1],o=i[2],h=0;if(r.some(function(e){return 0!==t[e]})){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(o)var m=o(a)}for(e&&e(i);h<r.length;h++)s=r[h],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(m)},i=self["webpackChunkidol_champ"]=self["webpackChunkidol_champ"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],function(){return a(4589)});i=a.O(i)})();
//# sourceMappingURL=app.7c7927ac.js.map